"use strict";function UnsupportedFeatureError(){var e=Error.apply(this,arguments);e.name=this.name="UnsupportedFeatureError",this.stack=e.stack,e.message?this.message=e.message:this.message="AR World loading error : Your device does not support one or several of it's requested features."}UnsupportedFeatureError.prototype=Object.create(Error.prototype,{constructor:{value:UnsupportedFeatureError,writable:!0,configurable:!0}}),function(){function e(e){function r(){return console.log(Object.getOwnPropertyNames(h)),Object.getOwnPropertyNames(h)}function o(r,o){if("boolean"!=typeof r)throw new TypeError("Ionicitude - captureScreen() expects first parameter to be of type 'boolean', '"+typeof r+"' given.");if("string"!=typeof o)throw new TypeError("Ionicitude - captureScreen() expects second parameter to be 'null' or of type 'string', '"+typeof o+"' given.");var t=e.defer();return f.captureScreen(r,o,function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}function t(e,r){function o(e){if(h.hasOwnProperty(e))throw new SyntaxError("Ionicitude - addAction() - The name '"+e+"' has already been added or is a reserved Ionicitude name.")}if("string"==typeof e||e instanceof String){if(!r)throw new TypeError("Ionicitude - addAction() expects a second argument if first argument is of type 'string'.");if("function"!=typeof r)throw new TypeError("Ionicitude - addAction() expects second argument to only be of type 'function', '"+typeof r+"' given.");o(e),h[e]=r}else{if(!("function"==typeof e||e instanceof Function))throw new TypeError("Ionicitude - addAction() expects first argument to be only of type 'string' or 'function', '"+typeof e+"' given");var t=e.name;if(!t)throw new TypeError("Ionicitude - addAction() do not accept anonymous function as first argument. Please, try passing a named function instead.");o(t),h[t]=e}return p}function n(){console.log("checking device");var r=e.defer();return f.isDeviceSupported(function(e){console.log(e),p.deviceSupportsFeatures=!0,r.resolve(e)},function(e){console.log(e),p.deviceSupportsFeatures=!1,r.reject(e)},y.reqFeatures),r.promise}function i(e){function r(){return e&&e.hasOwnProperty("customCallback")&&angular.isFunction(e.customCallback)}function o(){return!(e&&e.hasOwnProperty("doDeviceCheck")&&e.doDeviceCheck===!1)}function t(){return e&&e.hasOwnProperty("reqFeatures")&&angular.isArray(e.reqFeatures)}function i(){return e&&e.hasOwnProperty("worldLoadConfig")&&angular.isObject(e.worldLoadConfig)}function a(){return e&&e.hasOwnProperty("worldsRootFolder")&&angular.isString(e.worldsRootFolder)}if(console.log(e),!g){console.log("init service starting"),g=!0,l(),d();var c=s;r()&&(c=e.customCallback),f.setOnUrlInvokeCallback(c),o()&&n()||console.log("check skipped due to init settings"),t()&&(y.reqFeatures=e.reqFeatures),i()&&(y.worldLoadConfig=e.worldLoadConfig),a()&&(y.worldsRootFolder=e.worldsRootFolder)}return p}function a(r){if(r||(r="main"),p.deviceSupportsFeatures){var o=e.defer();return console.log("launch"),f.loadARchitectWorld(function(e){o.resolve(e)},function(e){o.reject(e)},c(r),y.reqFeatures,y.worldLoadConfig),o.promise}throw new UnsupportedFeatureError}function c(e){return"www/"+y.worldsRootFolder+"/"+e+"/index.html"}function s(e){var r=u(e);if(console.log(e,r),!h.hasOwnProperty(r.funcName)||"function"!=typeof h[r.funcName])throw new TypeError("'"+r.funcName+"' is either undefined or not a function in the Ionicitude service.");h[r.funcName](f,r.parameters)}function u(e){if(e=decodeURI(e),e.substr(0,w.length)===w){var r={},o=e.substr(w.length),t=o.indexOf("?");if(-1===t)r.funcName=o,r.parameters=null;else try{r.funcName=o.substr(0,t);var n=o.substr(t+1);r.parameters=angular.fromJson(n)}catch(i){throw i instanceof SyntaxError?new SyntaxError("parseActionUrl() expects the substring following the '?' in the parameter string to be a valid JSON object. '"+n+"' given."):i}return r}throw new SyntaxError("parseActionUrl() expects first parameter to be a string starting with '"+w+"'.")}function l(){f||(f=cordova.require("com.wikitude.phonegap.WikitudePlugin.WikitudePlugin"))}function d(){p.close=f.close,p.hide=f.hide,p.show=f.show,p.callJavaScript=f.callJavaScript,p.setLocation=f.setLocation}var f,p={checkDevice:n,deviceSupportsFeatures:!1,init:i,launchAR:a,addAction:t,listLibActions:r,captureScreen:o,close:null,hide:null,show:null,callJavaScript:null,setLocation:null},g=!1,w="architectsdk://",h={},y={worldLoadConfig:{camera_position:"back"},reqFeatures:["geo","2d_tracking"],worldsRootFolder:"wikitude-worlds"};return p}e.$inject=["$q"],angular.module("IonicitudeModule",[]),angular.module("IonicitudeModule").factory("Ionicitude",e)}();